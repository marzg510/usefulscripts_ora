## ロックされているオブジェクトの抽出
```
SELECT * FROM V$LOCKED_OBJECT LO
INNER JOIN DBA_OBJECTS O ON LO.OBJECT_ID=O.OBJECT_ID;

```


## ロックされているオブジェクトとそのユーザを確認

```SQL
-- 1. 以下クエリでロックしているオブジェクトとセッションを確認
SELECT
 TO_CHAR(SYSDATE,'YYYY/MM/DD HH24:MI:SS') AS TIMESTAMP
,O.OWNER,O.OBJECT_NAME
,S.USERNAME,S.PROGRAM,S.OSUSER
,S.SID,S.SERIAL#
,L.BLOCK
,L.TYPE AS LOCK_TYPE
,LT.NAME AS LOCK_NAME
,L.LMODE
,CASE L.LMODE
  WHEN 0 THEN '0 - なし'
  WHEN 1 THEN '1 - Null(NULL)'
  WHEN 2 THEN '2 - 行共有(SS)'
  WHEN 3 THEN '3 - 行排他(SX)'
  WHEN 4 THEN '4 - 共有(S)'
  WHEN 5 THEN '5 - 共有/行排他(SSX)'
  WHEN 6 THEN '6 - 排他(X)'
END AS LMODE_DESCRIPTION
,L.REQUEST
,CASE L.REQUEST
  WHEN 0 THEN '0 - なし'
  WHEN 1 THEN '1 - Null(NULL)'
  WHEN 2 THEN '2 - 行共有(SS)'
  WHEN 3 THEN '3 - 行排他(SX)'
  WHEN 4 THEN '4 - 共有(S)'
  WHEN 5 THEN '5 - 共有/行排他(SSX)'
  WHEN 6 THEN '6 - 排他(X)'
END AS REQ_DESCRIPTION
,S.STATUS
,L.CTIME
,O.SUBOBJECT_NAME
,S.SCHEMANAME
,S.MACHINE,S.TERMINAL,S.PORT
,LT.DESCRIPTION
,LO.*
FROM
V$LOCK L
INNER JOIN V$LOCK_TYPE LT ON L.TYPE = LT.TYPE
INNER JOIN V$LOCKED_OBJECT LO on L.SID=LO.SESSION_ID
INNER JOIN DBA_OBJECTS O ON LO.OBJECT_ID=O.OBJECT_ID
INNER JOIN V$SESSION S ON L.SID=S.SID
WHERE 0=0
--and s.username is not null
--AND L.TYPE IN ('TX')
ORDER BY OWNER,OBJECT_NAME,USERNAME, LOCK_TYPE DESC, LMODE, SID,SERIAL#
;

-- 2. SID, SERIAL#を以下コマンドに当てはめて実行
EXECUTE rdsadmin.rdsadmin_util.kill( SID, SERIAL#, 'IMMEDIATE' );
```
